<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Get Apikey</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.4/font/bootstrap-icons.css">
    <!-- <meta name="viewport" content="width=500, initial-scale=1" /> -->
    <meta name="viewport" content="width=device-width, initial-scale=1" />
</head>

<body>
    <div class="container-fluid mt-3 mb-4">
        <div class="mt-3 text-center" onclick="ads()" id="keyRaw">
            <h3 id="btn">Click To Get Apikey</h3>
        </div>
    </div>

    <script src="https://assets.imhardto.repl.co/ads.js"></script> <!-- Masukan Ads kalian Sendiri -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
        crossorigin="anonymous"></script>
    <script>
        // Ini Hanya Contoh
    
        const btn = document.getElementById('btn')
        const raw = document.getElementById('keyRaw')
        // const today = new Date(new Date().toLocaleString('en', { timeZone: 'Asia/Jakarta' }))
        const today = new Date(Date.now() + (3600 * 1000 * 24))
        var date = {
            Tahun: today.getFullYear(),
            Bulan: (today.getMonth() + 1).toString().padStart(2, "0"),
            Tanggal: today.getDate(),
            Jam: today.getHours(),
            Menit: today.getMinutes(),
            Detik: today.getSeconds()
        }

        btn.addEventListener('click', async () => {
            fetch("/getAuthKey", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                },
                body: JSON.stringify({
                    auth: 'XgDJQkELyFVqjh7M5' // AuthNya Sesuaikan
                })
            }).then(async (res) => {
                const { AuthKey } = await res.json()
                // console.log(AuthKey)


                await fetch("/getKey", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json",
                    },
                    body: JSON.stringify({
                        authkey: AuthKey
                    })
                }).then(async (resp) => {
                    const { apiKey } = await resp.json()
                    // console.log(apiKey)

                    // Hasil Apikey
                    raw.innerHTML = `<h5>Apikey</h5><b> ${apiKey} </b>\n<p class="text-muted">Expired : ${date.Tanggal}/${date.Bulan}/${date.Tahun}</p>`
                })
            })
        })
    </script>
</body>

</html>